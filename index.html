<!DOCTYPE html>
<html lang="en">
<head>
    <title>Mo'orea Coral Reefs</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--meta data for sharing links on Facebook-->
    <meta property="og:title" content="Health of Mo'orea coral reefs"/>
    <meta property="og:url" content="http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.5/video.html"/>
    <meta property="og:description" content="This is a story map describing selected sources of nutrients at the island of Mo'orea."/>
    <meta property="og:image" content="../../img/social.png"/>

    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">


    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="../../img/favicon.ico" type="image/x-icon">

    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=ZCOOL+XiaoWei" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Alegreya" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/storymap.2.5.css"><!--check filepath***>
    <!--add required libraries-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--mini global map-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
    <script src="js/globeminimap.js"></script> <!--***Check filepath>

    <!--story map plugin-- ***Check this line filepath-->
    <script src="js/storymap.2.5.js"></script>

    <link rel="shortcut icon" href="assets/palmisland.ico" type="image/x-icon">



</head>
<body>

<div id="storymap" class="container-fluid">
    <div class="row">
        <div class="col-sm-6 col-lg-3 storymap-story">

            <section data-scene="overview" data-background="assets/aerialShot.png">
                <div class="fullscreen text-center">
                    <h1 style = "color: rgba(193, 106, 25, 1); font-size: 90px;text-shadow: 6px 6px 12px rgba(40, 24, 112, 1)" >Mo'orea: Tour of Nutrient Sources</h1>
                    <h2 style = "color: rgba(234, 175, 37, 1); font-size: 55px;text-shadow: 6px 6px 12px rgba(40, 24, 112, 1)" >How do inorganic nutrients impact the health of Mo'orea's coral reef system?</h2>
                    </large>
                </div>
            </section>

            <section data-scene="moorea">
                <h2>Mo'orea's Setting</h2>
                <p>Located in the Society Islands of French Polynesia, Mo'orea lies about 12 miles northwest of Tahiti.</p>
                <p>The coral reefs surrounding the island hold tremendous biological and cultural significance to Mo'oreans.</p>
                <img src="assets/blueCoast.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                       alt-text="Oblique view of Mo'orea coastline.">
                <p>Onshore human activity may have an impact on offshore coral reef health.</p>
            </section>

            <section data-scene="mooreaLTER">
                <h2>Mo'orea's LTER Network</h2>
                <p>The Mo'orea Coral Reef Long-Term Ecological Research (LTER) Network has been in place since 2004.</p>
                <p>Research at this site collects an array of ecological data series, such as the bi-monthly water column nutrient concentrations data shown here at LTER monitoring Site 1.</p>
                <img src="assets/bleach.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Tropical fish swimming near possibly bleached coral.">
                <p>Such data may illuminate patterns and shifts in nutrient concentration over time.</p>
            </section>

            <section data-scene="sedsource" data-background="assets/ridgemos.png">
                <div class="fullscreen text-center">
                    <h1 style = "color: rgba(226, 72, 198, 1); ; font-size: 75px;text-shadow: 0 3px 12px rgba(16, 22, 114, 1)" >Mo'orea: Terrestrial Inorganic Nutrient Sources</h1>
                    <h2 style = "color: rgba(226, 72, 198, 1); font-size: 53px; text-shadow: 0 3px 12px rgba(16, 22, 114, 1)" >How do nutrients make their way into Mo'orea's coral reefs?</h2>
                    </large>
                </div>
            </section>

            <section data-scene="CooksBay">
                <h2>Cook's Bay: Infrastructure</h2>
                <p>Cook's Bay is a prime example of built-up areas on the island.</p>
                <img src="assets/hotel.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Mo'orean hotels close to beach.">
                <p>Infrastructure along the shoreline serves as a potential source of increased nutrient and sediment load in nearby waters.</p>
            </section>

            <section data-scene="CooksBay2">
                <h2>Cook's Bay: Imagery</h2>
                <img src="assets/road.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Biker on road.">
                <p>Towns and human construction extending along the bay have spread up into the steep slopes leading to the center of the island.</p>
            </section>

            <section data-scene="vegetation">
                <h2>Vegetation Coverage</h2>
                <p>Patches of clear-cut vegetation can be found scattered around the island.</p>
                <img src="assets/landscapeRow.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Rows of crop with mountains in background.">
                <p>Recently disturbed ground may be a source of increased nutrients that ultimately make their way offshore.</p>
            </section>

            <section data-scene="ridge">
                <h2>Ridgelines</h2>
                <p>High-slope areas cut across the island only a short distance from the coast.</p>
                <p>In fact, very little of the island has gentle slopes.</p>
                <img src="assets/terrain.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Steep valley cutting through high slopes.">
                <p>Sediments from steep ridgelines have only a short distance to travel before they make their way into the ocean.</p>
            </section>

            <section data-scene="resolutions" data-background="assets/sunsetglow.png">
                <div class="fullscreen text-center">
                    <h1 style = "font-size: 95px;" >Terrestrial Nutrient Sources and Concentrations</h1>
                    <h2 style = "font-size: 65px;" >Practical approaches</h2>
                    </large>
                </div>
            </section>

            <section data-scene="classification">
                <h2>Landcover Classification</h2>
                <p>Satellite imagery-based landcover classification maps can be used to track landcover change over time.</p>
                <img src="assets/classification.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Tropical fish swimming near possibly bleached coral.">
                <p>Google Earth Engine provides an excellent platform to create landcover classification maps derived from medium resolution, open access satellite imagery, such as the map of the Falkland Islands below.</p>
                <img src="assets/Falklands.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Landcover classification map of the Falkland Islands.">
            </section>

            <section data-scene="coralPassages">
                <h2>Passages and Flow</h2>
                <p>Passageways have been cut through the reef to increase ease of ship passage. Consequential impact on the circulation of nutrients? Currently unknown.</p>
                <p>Identifying coral reef connecivity may shed light on the course that suspended sediments and nutrients follow once introduced to the reef.</p>
                <img src="assets/treeCoral.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="Tree coral growing on other (bleached?) coral.">
                <p>Future research will center on delineating the flow of sediments throughout the coral reef as a proxy for terrestrially-sourced inorganic nutrients.</p>
            </section>

            <section data-scene="end" data-background="../../assets/fishturtle.png">
                <div class="fullscreen text-center">
                    <h1 style ="color: rgba(25, 193, 19, 1); font-size: 90px;text-shadow: 6px 6px 12px rgba(58, 26, 71, 1)">Thank you for your interest.</h1>
                </div>
            </section>

        </div>
        <!--map div-->
        <div class="col-sm-6 col-md-8 storymap-map"></div>
    </div>


    <dl>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-facebook-square btn"
               href="https://facebook.com/sharer.php?u=http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.5/video.html"
               target="_blank"></a>
        </dt>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-github btn" href="https://branblack3125.github.io/mooreastory/" style="top:40px" color: #3b5998;
               target="_blank"></a>
        </dt>
        <dt>
            <!--info icon-->
            <i class="fas fa-info-circle btn" style="top:60px" data-toggle="modal" data-target="#info-modal"></i>
        </dt>
    </dl>

    <!--the info page-->
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">About</h4>
                </div>
                <div class="modal-body">
                    <p>This storymap is built to describe ties between onshore activity and offshore coral reef health
                        associated with water column nutrient concentrations. The story map library is derived from the
                        storymap plugin for leaflet at <a>http://atlefren.github.io/storymap/</a>, and its functionality
                        relies on both leaflet and Boostrap.</p>
                    <p><b>storymap.js</b> | Released Date: 02/20/2017 | Version: 2.5 | MIT License </p>
                    <p><b>Author: Bran Black</b> | College of Earth, Ocean, Atmospheric Science | Oregon State University
                    </p>
                    <p>Sources of data came from LTER site data and personal communication with researchers who have worked on Mo'orea.</p>
                    <p>The favicon image was acquired from <a>http://www.udlcenter.org/advocacy/state/oregon.</a></p>
                    <p>This story map uses geospatial data from mapbox, Google Earth Engine, ESRI Map, Open Street Maps,
                      OpenLayers, and Mapbox.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- main javascript -->
<script type="text/javascript">


    // Create Legend Contents in html format
    var LTER_legend = '<i style="background: blue; opacity: 0.5"></i><p><b>Sample LTER Sites</b></p>';
    var channels_legend = '<i style="background: orange; opacity: 0.5"></i><p><b>Modified Channels</b></p>';

    var layers = {
        ESRI: {layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')},
        dark: {layer: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png')},
        contourMoorea: {layer: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')},
        comboMoorea: {layer: L.tileLayer('assets/Mapnik/{z}/{x}/{y}.png')},
        watercolor: {layer: L.tileLayer('http://tile.stamen.com/watercolor/{z}/{x}/{y}.jpg')},

        LTER: {
            layer: L.geoJson.ajax('assets/MooreaLTER.geojson', {
                color: 'blue',
            }), legend: LTER_legend
        },

        channels: {
            layer: L.geoJson.ajax('assets/channels.geojson', {
                fillColor: "#e5861b",
                fillOpacity: .5,
                color: '#efa823',
                opacity: 1,
            }), legend: channels_legend
        },

        satellite: {
            layer: L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamFrb2J6aGFvIiwiYSI6ImNpcms2YWsyMzAwMmtmbG5icTFxZ3ZkdncifQ.P9MBej1xacybKcDN_jehvw', {
                id: 'mapbox.satellite'
            })
        },
        cartodb_voyager: {layer: L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png')}
    };

    var scenes = {
        overview: {lat: -17.536719, lng: -149.834311, zoom: 13, name: 'Cover Page', layers: []},
        moorea: {lat: -17.536719, lng: -149.834311, zoom: 13, name: 'Moorea', layers: [layers.watercolor]},
        mooreaLTER: {lat: -17.536719, lng: -149.834311, zoom: 13, name: 'Moorea LTER', layers: [layers.satellite, layers.LTER]},
        sedsource: {lat: -17.536719, lng: -149.834311, zoom: 13, name: 'Moorea LTER', layers: [layers.satellite, layers.LTER]},
        CooksBay: {lat: -17.494985, lng: -149.821757, zoom: 15, name: 'Cooks Bay', layers: [layers.dark]},
        CooksBay2: {lat: -17.494985, lng: -149.821757, zoom: 15, name: 'Cooks Bay RS', layers: [layers.satellite]},
        vegetation: {lat: -17.524387, lng: -149.821757, zoom: 15, name: 'Cleared Vegetation', layers: [layers.satellite]},
        ridge: {lat: -17.529738, lng: -149.876666, zoom: 15, name: 'Ridge', layers: [layers.comboMoorea]},
        resolutions: {lat: -17.487378, lng: -149.894747, zoom: 16, name: 'Coral Passages', layers: [layers.satellite, layers.channels]},
        classification: {lat: -17.536719, lng: -149.834311, zoom: 13, name: 'Moorea LTER', layers: [layers.satellite]},
        coralPassages: {lat: -17.487378, lng: -149.894747, zoom: 16, name: 'Coral Passages', layers: [layers.satellite, layers.channels]},
        end: {lat: -17.536719, lng: -149.834311, zoom: 13, zoom: 13, name: 'The End', layers: [layers.watercolor]}
    };

    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.cartodb_voyager,
        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        credits: "",
        loader: true,
        scalebar: false,
        flyo: true,
        navwidget: true,

        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map($(".storymap-map")[0], {
                zoomControl: false, scrollWheelZoom: true, fadeAnimation: true,
                zoomAnimation: true
            }).setView([-17.5, -149.8], 7);

            //add an miniglobe
            new L.Control.GlobeMiniMap({
                marker: 'teal',
                position: 'bottomright'
            }).addTo(map);
            return map;
        }
    });
</script>
</body>
</html>
